---
title: Созданные значения — EF Core
author: rowanmiller
ms.date: 10/27/2016
ms.assetid: eb082011-11a1-41b4-a108-15daafa03e80
uid: core/modeling/generated-properties
ms.openlocfilehash: 9ecfa924a0614f327f0bd202cb7dda95bea810af
ms.sourcegitcommit: 0d36e8ff0892b7f034b765b15e041f375f88579a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 09/09/2018
ms.locfileid: "44250703"
---
# <a name="generated-values"></a>Генерируемые значения

## <a name="value-generation-patterns"></a>Шаблоны для генерируемых значений

Существует три шаблона для генерируемых значений, которые могут использоваться для свойств.
* Без генерации значения
* Значение, генерируемое при добавлении
* Значение, генерируемое при добавлении или обновлении

### <a name="no-value-generation"></a>Без генерации значения

Без генерации значения означает, что необходимо всегда указывать допустимое значение, которое будет сохранено в базе данных. Допустимое значение должно быть присвоено новым сущностям до того, как они будут добавлены в контекст.

### <a name="value-generated-on-add"></a>Значение, генерируемое при добавлении

Значение, генерируемое при добавлении, означает, что значение будет генерироваться для новых сущностей.

В зависимости от используемого поставщика базы данных, значение может генерироваться как на стороне клиента с помощью EF, так и на стороне базы данных. Если значение генерируется средствами базы данных, EF может присвоить временное значение при добавлении сущности в контекст. Затем временное значение может быть заменено на значение, сгенерированное базой данных, во время вызова `SaveChanges()`.

При добавлении сущности в контекст, имеет значение, присваиваемое свойству, EF попытается вставить это значение вместо создания нового. Свойство видимости, имеет значение, если не назначено значение по умолчанию среды CLR (`null` для `string`, `0` для `int`, `Guid.Empty` для `Guid`и т. д.). Дополнительные сведения см. в разделе [явные значения для создаваемых свойств](../saving/explicit-values-generated-properties.md).

> [!WARNING]  
> Способ генерации значений при добавлении сущностей будет зависеть от используемого поставщика базы данных. Он может устанавливать автоматическую генерацию значений для некоторых типов свойств, тогда как другие могут требовать явного указания способа генерации значений.
>
> Например, при использовании SQL Server, значения будут создаваться автоматически для `GUID` свойства (с помощью GUID алгоритм последовательной обработки SQL Server). Тем не менее если указать, что `DateTime` создается свойство при добавлении, то необходимо настроить способ создать значения. — Это один из способов сделать это, чтобы настроить значение по умолчанию `GETDATE()`, см. в разделе [значения по умолчанию](relational/default-values.md).

### <a name="value-generated-on-add-or-update"></a>Значение, генерируемое при добавлении или обновлении

Значение, генерируемое при добавлении или обновлении, означает, что новые значения будут генерироваться каждый раз, когда происходит сохранение записи (вставка или обновление).

Как и `value generated on add`, если указать значение для свойства на вновь добавленный экземпляр сущности, что значение будет вставлен вместо того чтобы создаваемый значение. Это также можно задать явно заданное значение при обновлении. Дополнительные сведения см. в разделе [явные значения для создаваемых свойств](../saving/explicit-values-generated-properties.md).

> [!WARNING]
> Способ создания значения для добавленных и измененных сущностей будет зависеть от используемого поставщика базы данных. Поставщики баз данных могут устанавливать атоматическую генерацию значений для некоторых типов свойств, тогда как другие требуют явного указания способа генерации значений.
> 
> Например, при использовании SQL Server `byte[]` свойства, заданные при создании на добавление или обновление и помечен как маркеры параллелизма, будет настроена с `rowversion` тип данных — так, что значения будут создаваться в базе данных. Тем не менее если указать, что `DateTime` создается свойство добавить или обновить, а затем необходимо настроить способ создать значения. — Это один из способов сделать это, чтобы настроить значение по умолчанию `GETDATE()` (см. в разделе [значения по умолчанию](relational/default-values.md)) для формирования значений для новых строк. Затем можно использовать триггер базы данных для формирования значений во время обновления (например, следующий триггер пример).
> 
> [!code-sql[Main](../../../samples/core/Modeling/FluentAPI/Samples/ValueGeneratedOnAddOrUpdate.sql)]

## <a name="conventions"></a>Соглашения

Обычно для несоставных первичных ключей типов short, int, long или Guid значения генерируются при добавлении. Для всех остальных свойств значения не будут генерироваться.

## <a name="data-annotations"></a>Заметки к данным

### <a name="no-value-generation-data-annotations"></a>Без генерации значения (заметки к данным)

[!code-csharp[Main](../../../samples/core/Modeling/DataAnnotations/Samples/ValueGeneratedNever.cs#Sample)]

### <a name="value-generated-on-add-data-annotations"></a>Значение, генерируемое при добавлении (заметки к данным)

[!code-csharp[Main](../../../samples/core/Modeling/DataAnnotations/Samples/ValueGeneratedOnAdd.cs#Sample)]

> [!WARNING]  
> Это просто позволяет платформе EF, что значения, сформированные для добавленных сущностей, он не гарантирует, что EF действия по настройке реальные механизмы для создания значений. См. в разделе [добавить значение, созданное в](#value-generated-on-add) более подробные сведения.

### <a name="value-generated-on-add-or-update-data-annotations"></a>Значение, генерируемое при добавлении или обновлении (заметки к данным)

[!code-csharp[Main](../../../samples/core/Modeling/DataAnnotations/Samples/ValueGeneratedOnAddOrUpdate.cs#Sample)]

> [!WARNING]  
> Это просто позволяет платформе EF, что значения, сформированные для добавленных или обновленных сущностей, он не гарантирует, что EF действия по настройке реальные механизмы для создания значений. См. в разделе [значение, созданное в добавлении или обновлении](#value-generated-on-add-or-update) более подробные сведения.

## <a name="fluent-api"></a>Текучий API

Текучий API можно использовать для изменения шаблона генерации значения для заданного свойства.

### <a name="no-value-generation-fluent-api"></a>Без генерации значения (текучий API)

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/Samples/ValueGeneratedNever.cs#Sample)]

### <a name="value-generated-on-add-fluent-api"></a>Значение, генерируемое при добавлении (текучий API)

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/Samples/ValueGeneratedOnAdd.cs#Sample)]

> [!WARNING]  
> `ValueGeneratedOnAdd()` дает платформе EF, что значения, сформированные для добавленных сущностей, он не гарантирует, что EF действия по настройке реальные механизмы для создания значений.  См. в разделе [добавить значение, созданное в](#value-generated-on-add) более подробные сведения.

### <a name="value-generated-on-add-or-update-fluent-api"></a>Значение, генерируемое при добавлении или обновлении (текучий API)

[!code-csharp[Main](../../../samples/core/Modeling/FluentAPI/Samples/ValueGeneratedOnAddOrUpdate.cs#Sample)]

> [!WARNING]  
> Это просто позволяет платформе EF, что значения, сформированные для добавленных или обновленных сущностей, он не гарантирует, что EF действия по настройке реальные механизмы для создания значений. См. в разделе [значение, созданное в добавлении или обновлении](#value-generated-on-add-or-update) более подробные сведения.
